<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Model Zero</title>
    <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/notice.css">
    <script src="./script/jquery-3.6.0.js"></script>
</head>
<body>
    <div class="custom-cursor"></div> <!-- 마우스따라다니는 원 -->
    <a href="https://pf.kakao.com/_mIxiYG/chat" target="_blank" rel="noopener noreferrer"><button id="chatButton"><img src="./img/chatbot.png" alt=""><img src="./img/chattxt.svg" alt=""></button> </a>
    <button id="topButton" style="display: none;"><img src="./img/arrow.svg" alt="">Top</button> <!-- 탑버튼 -->
    <!--문의하기-->
    <!-- header -->
    <div id="header"></div>
    <section>
        <div class="section4 contact">
            <h2>Contact</h2>
            <h3>문의하기</h3>
  
            <form>
              <label for="name">성함*</label>
              <input type="text" id="name" name="name" required>
  
              <label for="phone">연락처*</label>
              <input type="tel" id="phone" name="phone" required>
  
              <label for="email">Email</label>
              <input type="email" id="email" name="email">
  
              <label for="message">문의내용* (설치예정 주소, 예정일 등)</label>
              <textarea id="message" name="message" required></textarea>
  
              <label for="text">개인정보동의</label>
              <div class="privacy">
                  <div class="privacy-textBox">
                    <div class="privacy-text">
                        개인정보 수집 및 이용 동의서
                        [개인정보 수집 및 이용에 대한 안내]

                        [주식회사 좁은길] (이하 "회사")는 관련 법령에 따라 개인정보 보호를 중요하게 생각하며, 이용자의 개인정보를 보호하기 위해 최선을 다하고 있습니다. 아래와 같이 개인정보를 수집 및 이용하는 데 동의를 요청드립니다.

                        1. 개인정보 수집 항목 및 이용 목적
                        회사는 다음과 같은 목적을 위해 최소한의 개인정보를 수집 및 이용합니다.

                        수집 항목   이용 목적
                        성명, 연락처(이메일, 전화번호)   회원가입, 문의 응대, 서비스 제공
                        아이디, 비밀번호   본인 확인 및 서비스 이용
                        결제정보(카드번호, 계좌정보)   서비스 이용 요금 결제
                        접속 IP, 쿠키, 서비스 이용 기록   서비스 분석 및 품질 개선
                        2. 개인정보 보유 및 이용 기간
                        회사는 원칙적으로 개인정보 수집 및 이용 목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. 다만, 관계 법령에 따라 일정 기간 보관해야 하는 경우는 다음과 같습니다.

                        보존 항목   보존 기간   보존 근거
                        계약 또는 청약철회 기록   5년   전자상거래 등에서의 소비자 보호에 관한 법률
                        대금결제 및 재화 공급 기록   5년   전자상거래 등에서의 소비자 보호에 관한 법률
                        소비자 불만 또는 분쟁처리 기록   3년   전자상거래 등에서의 소비자 보호에 관한 법률
                        3. 개인정보 제공 및 위탁
                        회사는 원칙적으로 이용자의 동의 없이 개인정보를 외부에 제공하지 않습니다. 다만, 아래와 같은 경우 개인정보를 제3자에게 제공할 수 있습니다.

                        법령에 의해 요구되는 경우

                        이용자가 사전에 동의한 경우

                        서비스 제공을 위해 필요한 경우 (예: 결제 처리, 배송 서비스)

                        또한, 원활한 서비스 제공을 위해 일부 업무를 외부 업체에 위탁할 수 있으며, 이에 대한 상세한 내용은 홈페이지 개인정보처리방침에서 확인할 수 있습니다.

                        4. 동의 거부 권리 및 불이익 안내
                        이용자는 개인정보 제공에 대한 동의를 거부할 권리가 있습니다. 다만, 필수 정보 제공에 동의하지 않을 경우 서비스 이용이 제한될 수 있습니다.

                        본인은 위 내용을 충분히 숙지하였으며, 이에 동의합니다.
                    </div>
                  </div>
                  <input type="checkbox" id="agree" name="agree">
                  <label for="agree">개인정보 수집 동의</label>
              </div>
  
              <button type="submit">Send
                <img src="./img/buttom_effect.png" alt="">
                <p>Send</p>
              </button>
            </form>
          </div>

    </section>

    <!-- 푸터 -->
    <div id="footer"></div>

</body>
<script>
  document.querySelector("form").addEventListener("submit", async function (e) {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const email = document.getElementById("email").value.trim();
    const message = document.getElementById("message").value.trim();
    const agree = document.getElementById("agree").checked;

    if (!name || !phone || !message) {
      alert("필수 항목을 입력해주세요.");
      return;
    }

    if (!agree) {
      alert("개인정보 수집에 동의해주세요.");
      return;
    }

    const payload = {
      title: `[Model Zero 문의] ${name}님 문의`,
      content: `
        <p><strong>성함:</strong> ${name}</p>
        <p><strong>연락처:</strong> ${phone}</p>
        <p><strong>문의 내용:</strong><br>${message.replace(/\n/g, "<br>")}</p>
      `,
      agree: agree,
      replyTo: email
    };

    try {
      const res = await fetch("https://api.narrowroad-model.com/model_home_page?func=send-email", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const result = await res.json();
      if (res.ok) {
        alert("✅ 문의가 성공적으로 접수되었습니다.");
        document.querySelector("form").reset();
      } else {
        alert(`❌ 오류: ${result.message}`);
      }
    } catch (err) {
      console.error("❌ 전송 실패:", err);
      alert("서버 오류로 인해 전송에 실패했습니다.");
    }
  });
</script>
<script src="./script/common.js"></script>
</html>